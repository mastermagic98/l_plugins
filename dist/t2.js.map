{"version":3,"file":"t2.js","mappings":"SAAA;SACA;;;;;UCDA;UACA;UACA;UACA;UACA,yCAAyC,wCAAwC;UACjF;UACA;UACA;;;;;UCPA;;;;;UCAA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D;;;;;;;;;;;;;;;;ACNO,SAASA,QAAQA,CAACC,IAAI,EAAEC,IAAI,EAAE;EACjC,IAAIC,OAAO;EACX,OAAO,YAAY;IACf,IAAIC,OAAO,GAAG,IAAI;MAAEC,IAAI,GAAGC,SAAS;IACpCC,YAAY,CAACJ,OAAO,CAAC;IACrBA,OAAO,GAAGK,UAAU,CAAC,YAAY;MAC7BP,IAAI,CAACQ,KAAK,CAACL,OAAO,EAAEC,IAAI,CAAC;IAC7B,CAAC,EAAEH,IAAI,CAAC;EACZ,CAAC;AACL;AAEO,SAASQ,gBAAgBA,CAACC,OAAO,EAAE;EACtC,IAAIC,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,IAAIF,OAAO,EAAEC,KAAK,CAACE,OAAO,CAACF,KAAK,CAACG,OAAO,CAAC,CAAC,GAAGJ,OAAO,CAAC;EACrD,IAAIK,IAAI,GAAGJ,KAAK,CAACK,WAAW,CAAC,CAAC;EAC9B,IAAIC,KAAK,GAAGC,MAAM,CAACP,KAAK,CAACQ,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACzD,IAAIC,GAAG,GAAGH,MAAM,CAACP,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAACM,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EAClD,OAAOL,IAAI,GAAG,GAAG,GAAGE,KAAK,GAAG,GAAG,GAAGI,GAAG;AACzC;AAEO,SAASC,oBAAoBA,CAACC,OAAO,EAAE;EAC1C,IAAI,CAACA,OAAO,EAAE,OAAO,GAAG;EACxB,IAAIC,IAAI,GAAG,IAAIZ,IAAI,CAACW,OAAO,CAAC;EAC5B,IAAIF,GAAG,GAAGH,MAAM,CAACM,IAAI,CAACV,OAAO,CAAC,CAAC,CAAC,CAACM,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACjD,IAAIH,KAAK,GAAGC,MAAM,CAACM,IAAI,CAACL,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACxD,IAAIL,IAAI,GAAGS,IAAI,CAACR,WAAW,CAAC,CAAC;EAC7B,OAAOK,GAAG,GAAG,GAAG,GAAGJ,KAAK,GAAG,GAAG,GAAGF,IAAI;AACzC;AAEO,SAASU,SAASA,CAAA,EAAG;EACxB,IAAIC,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC;EAC9C,OAAOH,IAAI,KAAK,IAAI,GAAG,IAAI,GAAGA,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI;AAC7D;AAEO,SAASI,oBAAoBA,CAAA,EAAG;EACnC,OAAOH,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC;AAC9C;AAEO,SAASE,oBAAoBA,CAAA,EAAG;EACnC,IAAIL,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC;EAC9C,IAAIH,IAAI,KAAK,IAAI,EAAE;IACf,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;EACvB,CAAC,MAAM,IAAIA,IAAI,KAAK,IAAI,EAAE;IACtB,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;EACvB,CAAC,MAAM;IACH,OAAO,CAAC,IAAI,CAAC;EACjB;AACJ;;AC/C6D;AAE7D,IAAIM,YAAY,GAAG,CAAC,CAAC;AACrB,IAAIC,aAAa,GAAG,CAAC,CAAC;AACtB,IAAIC,SAAS,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;AAEnC,SAASC,iBAAiBA,CAAA,EAAG;EACzBC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC;EACvC,KAAK,IAAIC,GAAG,IAAIN,YAAY,EAAE;IAC1B,IAAIA,YAAY,CAACM,GAAG,CAAC,CAACC,SAAS,IAAI3B,IAAI,CAAC4B,GAAG,CAAC,CAAC,GAAGR,YAAY,CAACM,GAAG,CAAC,CAACC,SAAS,GAAGL,SAAS,EAAE;MACrF,OAAOF,YAAY,CAACM,GAAG,CAAC;IAC5B;EACJ;EACA,KAAK,IAAIA,GAAG,IAAIL,aAAa,EAAE;IAC3B,IAAIA,aAAa,CAACK,GAAG,CAAC,CAACC,SAAS,IAAI3B,IAAI,CAAC4B,GAAG,CAAC,CAAC,GAAGP,aAAa,CAACK,GAAG,CAAC,CAACC,SAAS,GAAGL,SAAS,EAAE;MACvF,OAAOD,aAAa,CAACK,GAAG,CAAC;MACzBX,KAAK,CAACC,OAAO,CAACa,GAAG,CAAC,yBAAyB,GAAGH,GAAG,EAAE,IAAI,CAAC;IAC5D;EACJ;AACJ;AAEAI,WAAW,CAACP,iBAAiB,EAAE,IAAI,GAAG,IAAI,CAAC;AAE3C,SAASQ,eAAeA,CAACC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAClDX,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE;IAAEO,IAAI;IAAEG;EAAK,CAAC,CAAC,CAAC,CAAC;EACxD,IAAI,CAACH,IAAI,CAACE,OAAO,EAAE;IACfV,OAAO,CAACY,KAAK,CAAC,qBAAqB,EAAEJ,IAAI,CAAC;IAC1CC,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACrB;EACJ;EACA,IAAIC,KAAK,GAAGN,IAAI,CAACE,OAAO,CAACK,GAAG,CAAC,UAAUC,IAAI,EAAE;IACzC,OAAO;MACHC,EAAE,EAAED,IAAI,CAACC,EAAE;MACXC,KAAK,EAAEF,IAAI,CAACE,KAAK,IAAIF,IAAI,CAACG,IAAI;MAC9BC,WAAW,EAAEJ,IAAI,CAACI,WAAW;MAC7BC,aAAa,EAAEL,IAAI,CAACK,aAAa;MACjCC,YAAY,EAAEN,IAAI,CAACM,YAAY;MAC/BC,YAAY,EAAEP,IAAI,CAACO,YAAY,IAAIP,IAAI,CAACQ,cAAc;MACtDC,cAAc,EAAET,IAAI,CAACS,cAAc;MACnCC,aAAa,EAAEV,IAAI,CAACU,aAAa;MACjCP,IAAI,EAAEH,IAAI,CAACG,IAAI;MACfQ,eAAe,EAAEX,IAAI,CAACW,eAAe,IAAI,CAAC;IAC9C,CAAC;EACL,CAAC,CAAC;EACFjB,OAAO,CAACC,IAAI,CAAC,GAAG;IACZO,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,WAAW,GAAGlB,IAAI,CAAC;IAC/CD,OAAO,EAAEI,KAAK;IACdH,IAAI,EAAEA;EACV,CAAC;EACDF,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACzB;AAEA,IAAIiB,GAAG,GAAG;EACNC,KAAK,EAAE,SAASA,KAAKA,CAAA,EAAG;IACpBnC,YAAY,GAAG,CAAC,CAAC;IACjBC,aAAa,GAAG,CAAC,CAAC;EACtB,CAAC;EACDmC,MAAM,EAAE,SAASA,MAAMA,CAACC,IAAI,EAAEC,OAAO,EAAEC,IAAI,EAAE;IACzC,IAAIjC,GAAG,GAAG+B,IAAI,CAAChB,EAAE,GAAG,GAAG,IAAIgB,IAAI,CAACd,IAAI,GAAG,IAAI,GAAG,OAAO,CAAC;IACtD,IAAIvB,YAAY,CAACM,GAAG,CAAC,IAAIN,YAAY,CAACM,GAAG,CAAC,CAACC,SAAS,IAAI3B,IAAI,CAAC4B,GAAG,CAAC,CAAC,GAAGR,YAAY,CAACM,GAAG,CAAC,CAACC,SAAS,GAAGL,SAAS,EAAE;MAC1GoC,OAAO,CAACtC,YAAY,CAACM,GAAG,CAAC,CAAC+B,IAAI,CAAC;IACnC,CAAC,MAAM;MACH1C,KAAK,CAAC6C,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAChB,EAAE,EAAEgB,IAAI,CAACd,IAAI,GAAG,IAAI,GAAG,OAAO,EAAE,UAAUX,IAAI,EAAE;QAClEZ,YAAY,CAACM,GAAG,CAAC,GAAG;UAChB+B,IAAI,EAAEzB,IAAI;UACVL,SAAS,EAAE3B,IAAI,CAAC4B,GAAG,CAAC;QACxB,CAAC;QACD8B,OAAO,CAAC1B,IAAI,CAAC;MACjB,CAAC,EAAE2B,IAAI,CAAC;IACZ;EACJ,CAAC;EACDG,wBAAwB,EAAE,SAASA,wBAAwBA,CAAC7B,MAAM,EAAEC,OAAO,EAAE;IACzEV,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAAC,CAAC;IAChD,IAAIC,GAAG,GAAG,cAAc,GAAGb,SAAS,CAAC,CAAC;IACtC,IAAIQ,aAAa,CAACK,GAAG,CAAC,IAAIL,aAAa,CAACK,GAAG,CAAC,CAACC,SAAS,IAAI3B,IAAI,CAAC4B,GAAG,CAAC,CAAC,GAAGP,aAAa,CAACK,GAAG,CAAC,CAACC,SAAS,GAAGL,SAAS,EAAE;MAC7GS,eAAe,CAACV,aAAa,CAACK,GAAG,CAAC,CAAC+B,IAAI,EAAExB,MAAM,EAAEC,OAAO,EAAE,aAAa,CAAC;IAC5E,CAAC,MAAM;MACH,IAAInC,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC;MACtB,IAAI+D,SAAS,GAAG,IAAI/D,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACC,OAAO,CAACF,KAAK,CAACG,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;MAClE,IAAI8D,UAAU,GAAGD,SAAS,CAAC3D,WAAW,CAAC,CAAC,GAAG,GAAG,IAAI2D,SAAS,CAACxD,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGwD,SAAS,CAAC7D,OAAO,CAAC,CAAC;MACvGa,KAAK,CAAC6C,IAAI,CAACK,GAAG,CAAC,wBAAwB,GAAGpD,SAAS,CAAC,CAAC,GAAG,YAAY,GAAGK,oBAAoB,CAAC,CAAC,GAAG,4CAA4C,GAAG8C,UAAU,GAAG,wBAAwB,EAAE,UAAUhC,IAAI,EAAE;QAClMR,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEO,IAAI,CAAC,CAAC,CAAC;QACrC,IAAIA,IAAI,CAACE,OAAO,EAAE;UACd,IAAID,MAAM,GAAG,IAAIlB,KAAK,CAACmD,MAAM,CAAClC,IAAI,CAACE,OAAO,CAACiC,MAAM,CAAC;UAClDlC,MAAM,CAACmC,UAAU,GAAG,YAAY;YAC5BrC,eAAe,CAACC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAE,aAAa,CAAC;UACzD,CAAC;UACDF,IAAI,CAACE,OAAO,CAACmC,OAAO,CAAC,UAAU7B,IAAI,EAAE8B,CAAC,EAAE;YACpCvD,KAAK,CAAC6C,IAAI,CAACW,OAAO,CAAC/B,IAAI,CAACC,EAAE,EAAE,OAAO,EAAE,UAAU8B,OAAO,EAAE;cACpDvC,IAAI,CAACE,OAAO,CAACoC,CAAC,CAAC,CAACnB,eAAe,GAAGoB,OAAO;cACzCtC,MAAM,CAACI,MAAM,CAACG,IAAI,CAACC,EAAE,EAAE,CAAC,CAAC,CAAC;YAC9B,CAAC,EAAE,YAAY;cACXR,MAAM,CAACI,MAAM,CAACG,IAAI,CAACC,EAAE,EAAE,CAAC,CAAC,CAAC;YAC9B,CAAC,CAAC;UACN,CAAC,CAAC;UACFpB,aAAa,CAACK,GAAG,CAAC,GAAG;YACjB+B,IAAI,EAAEzB,IAAI;YACVL,SAAS,EAAE3B,IAAI,CAAC4B,GAAG,CAAC;UACxB,CAAC;UACDb,KAAK,CAACC,OAAO,CAACa,GAAG,CAAC,yBAAyB,GAAGH,GAAG,EAAEL,aAAa,CAACK,GAAG,CAAC,CAAC;QAC1E,CAAC,MAAM;UACHF,OAAO,CAACY,KAAK,CAAC,4BAA4B,CAAC,CAAC,CAAC;UAC7CH,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACzB;MACJ,CAAC,EAAE,YAAY;QACXb,OAAO,CAACY,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC;QACtCH,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC;IACN;EACJ;EACA;AACJ,CAAC;AAED,SAASmC,IAAIA,CAACvC,MAAM,EAAEC,OAAO,EAAE;EAC3BV,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE;IAAEQ,MAAM;IAAEC;EAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,IAAI,EAAED,MAAM,YAAYlB,KAAK,CAACmD,MAAM,CAAC,EAAE;IACnC1C,OAAO,CAACY,KAAK,CAAC,wBAAwB,EAAEH,MAAM,CAAC;IAC/C;EACJ;EACAqB,GAAG,CAACQ,wBAAwB,CAAC7B,MAAM,EAAEC,OAAO,CAAC;EAC7CoB,GAAG,CAACmB,iBAAiB,CAACxC,MAAM,EAAEC,OAAO,CAAC;EACtCoB,GAAG,CAACoB,mBAAmB,CAACzC,MAAM,EAAEC,OAAO,CAAC;EACxCoB,GAAG,CAACqB,iBAAiB,CAAC1C,MAAM,EAAEC,OAAO,CAAC;EACtCoB,GAAG,CAACsB,kBAAkB,CAAC3C,MAAM,EAAEC,OAAO,CAAC;AAC3C;;;AC5H+B;AACoD;AAEnF,SAAS2C,OAAOA,CAACpB,IAAI,EAAEqB,MAAM,EAAE;EAC3B,IAAI,CAACC,KAAK,GAAG,YAAY;IACrB,IAAI,CAACC,IAAI,GAAGjE,KAAK,CAACkE,QAAQ,CAAChE,GAAG,CAAC,SAAS,EAAEwC,IAAI,CAAC;IAC/C,IAAI,CAACyB,GAAG,GAAG,IAAI,CAACF,IAAI,CAACG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,CAACC,UAAU,GAAGN,MAAM,CAAC3C,IAAI,KAAK,QAAQ;IAC1C,IAAI,CAACkD,MAAM,GAAG5B,IAAI,CAACX,YAAY,GAAGW,IAAI,CAACX,YAAY,CAACwC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;IACpE,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACxC,YAAY,GAAG,GAAG;IACvB,IAAI,CAAC,IAAI,CAACqC,UAAU,EAAE;MAClB,IAAII,MAAM,GAAG,CAAC,CAAC/B,IAAI,CAACV,YAAY,IAAIU,IAAI,CAACT,cAAc,IAAI,MAAM,IAAI,EAAE,EAAEyC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;MACpF,IAAI/C,KAAK,GAAGe,IAAI,CAACf,KAAK,IAAIe,IAAI,CAACd,IAAI,IAAIc,IAAI,CAACR,cAAc,IAAIQ,IAAI,CAACP,aAAa;MAChF,IAAI,CAAC8B,IAAI,CAACG,IAAI,CAAC,cAAc,CAAC,CAACO,IAAI,CAAChD,KAAK,CAAC;MAC1C,IAAI,CAACsC,IAAI,CAACG,IAAI,CAAC,gBAAgB,CAAC,CAACO,IAAI,CAACF,MAAM,GAAG,KAAK,IAAI/B,IAAI,CAACR,cAAc,IAAIQ,IAAI,CAACP,aAAa,CAAC,CAAC;MACnG,IAAI,IAAI,CAACmC,MAAM,KAAK,GAAG,EAAE;QACrB,IAAI,CAACL,IAAI,CAACG,IAAI,CAAC,aAAa,CAAC,CAAC9C,MAAM,CAAC,4BAA4B,GAAG,IAAI,CAACgD,MAAM,GAAG,QAAQ,CAAC;MAC/F,CAAC,MAAM;QACH,IAAI,CAACL,IAAI,CAACG,IAAI,CAAC,aAAa,CAAC,CAAC9C,MAAM,CAAC,mCAAmC,CAAC;MAC7E;MACA,IAAI,CAAC2C,IAAI,CAACG,IAAI,CAAC,aAAa,CAAC,CAAC9C,MAAM,CAAC,wCAAwC,CAAC;MAC9E,IAAI,CAAC2C,IAAI,CAACG,IAAI,CAAC,aAAa,CAAC,CAAC9C,MAAM,CAAC,wCAAwC,CAAC;IAClF,CAAC,MAAM;MACH,IAAI,CAAC2C,IAAI,CAACG,IAAI,CAAC,cAAc,CAAC,CAACO,IAAI,CAACjC,IAAI,CAACd,IAAI,CAAC;MAC9C,IAAI,CAACqC,IAAI,CAACG,IAAI,CAAC,gBAAgB,CAAC,CAACQ,MAAM,CAAC,CAAC;IAC7C;EACJ,CAAC;EAED,IAAI,CAACC,iBAAiB,GAAG,UAAUC,SAAS,EAAE;IAC1C,IAAI9E,KAAK,CAACC,OAAO,CAAC8E,KAAK,CAAC,YAAY,CAAC,EAAE;MACnC,IAAI/E,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE,SAAS,CAAC,KAAK,QAAQ,IAAI8E,MAAM,CAACC,UAAU,GAAG,GAAG,EAAE;QACzF,OAAOH,SAAS,CAAChD,aAAa,GAAG9B,KAAK,CAACuC,GAAG,CAAC4B,GAAG,CAACW,SAAS,CAAChD,aAAa,EAAE,UAAU,CAAC,GAAG,IAAI,CAACuC,UAAU,GAAG,6BAA6B,GAAG3B,IAAI,CAAChB,EAAE,GAAG,gBAAgB,GAAG,EAAE;MAC3K;MACA,OAAOoD,SAAS,CAAChD,aAAa,GAAG9B,KAAK,CAACuC,GAAG,CAAC4B,GAAG,CAACW,SAAS,CAAChD,aAAa,EAAE,MAAM,CAAC,GAAG,IAAI,CAACuC,UAAU,GAAG,6BAA6B,GAAG3B,IAAI,CAAChB,EAAE,GAAG,gBAAgB,GAAG,EAAE;IACvK;IACA,OAAO,EAAE;EACb,CAAC;EAED,IAAI,CAACwD,KAAK,GAAG,YAAY;IACrB,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAAChB,GAAG,CAACiB,MAAM,GAAG,YAAY;MAC1BD,KAAK,CAAClB,IAAI,CAACoB,QAAQ,CAAC,cAAc,CAAC;IACvC,CAAC;IACD,IAAI,CAAClB,GAAG,CAACmB,OAAO,GAAG,YAAY;MAC3BH,KAAK,CAAChB,GAAG,CAACoB,GAAG,GAAG,sBAAsB;IAC1C,CAAC;EACL,CAAC;EAED,IAAI,CAACC,eAAe,GAAG,YAAY;IAC/B,IAAIL,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC,IAAI,CAACd,UAAU,IAAI,CAAC,IAAI,CAACG,YAAY,EAAE;MACxCjC,GAAG,CAACE,MAAM,CAACC,IAAI,EAAE,UAAUD,MAAM,EAAE;QAC/B,IAAIgD,QAAQ,GAAGhD,MAAM,CAACtB,OAAO,GAAGsB,MAAM,CAACtB,OAAO,CAACuE,MAAM,CAAC,UAAUC,CAAC,EAAE;UAC/D,OAAOA,CAAC,CAACvE,IAAI,KAAK,SAAS;QAC/B,CAAC,CAAC,GAAG,EAAE;QACP,IAAIwE,cAAc,GAAGxF,oBAAoB,CAAC,CAAC;QAC3C,IAAI0C,KAAK,GAAG2C,QAAQ,CAACrB,IAAI,CAAC,UAAUuB,CAAC,EAAE;UACnC,OAAOC,cAAc,CAACC,QAAQ,CAACF,CAAC,CAACG,SAAS,CAAC;QAC/C,CAAC,CAAC,IAAIL,QAAQ,CAAC,CAAC,CAAC;QACjBN,KAAK,CAACX,YAAY,GAAG1B,KAAK,GAAGA,KAAK,CAACgD,SAAS,GAAG,GAAG;QAClD,IAAIX,KAAK,CAACX,YAAY,KAAK,GAAG,EAAE;UAC5BW,KAAK,CAAClB,IAAI,CAACG,IAAI,CAAC,qBAAqB,CAAC,CAACO,IAAI,CAACQ,KAAK,CAACX,YAAY,CAACuB,WAAW,CAAC,CAAC,CAAC;QACjF,CAAC,MAAM;UACHZ,KAAK,CAAClB,IAAI,CAACG,IAAI,CAAC,qBAAqB,CAAC,CAACO,IAAI,CAAC,GAAG,CAAC;QACpD;QACA,IAAIZ,MAAM,CAAC3C,IAAI,KAAK,aAAa,IAAI2C,MAAM,CAAC3C,IAAI,KAAK,iBAAiB,EAAE;UACpE,IAAIsB,IAAI,CAACN,eAAe,IAAIM,IAAI,CAACN,eAAe,CAACjB,OAAO,EAAE;YACtD,IAAI6E,MAAM,GAAGlG,SAAS,CAAC,CAAC;YACxB,IAAImG,WAAW,GAAGvD,IAAI,CAACN,eAAe,CAACjB,OAAO,CAACiD,IAAI,CAAC,UAAU8B,CAAC,EAAE;cAC7D,OAAOA,CAAC,CAACC,UAAU,KAAKH,MAAM;YAClC,CAAC,CAAC;YACF,IAAIC,WAAW,IAAIA,WAAW,CAACG,aAAa,IAAIH,WAAW,CAACG,aAAa,CAAChD,MAAM,EAAE;cAC9E,IAAIiD,WAAW,GAAGJ,WAAW,CAACG,aAAa,CAAC,CAAC,CAAC,CAACpE,YAAY;cAC3DmD,KAAK,CAACnD,YAAY,GAAGrC,oBAAoB,CAAC0G,WAAW,CAAC;YAC1D,CAAC,MAAM,IAAI3D,IAAI,CAACV,YAAY,EAAE;cAC1BmD,KAAK,CAACnD,YAAY,GAAGrC,oBAAoB,CAAC+C,IAAI,CAACV,YAAY,CAAC;YAChE;UACJ,CAAC,MAAM,IAAIU,IAAI,CAACV,YAAY,EAAE;YAC1BmD,KAAK,CAACnD,YAAY,GAAGrC,oBAAoB,CAAC+C,IAAI,CAACV,YAAY,CAAC;UAChE;QACJ,CAAC,MAAM,IAAI+B,MAAM,CAAC3C,IAAI,KAAK,oBAAoB,IAAI2C,MAAM,CAAC3C,IAAI,KAAK,iBAAiB,EAAE;UAClF,IAAIsB,IAAI,CAACN,eAAe,IAAIM,IAAI,CAACN,eAAe,CAACH,cAAc,EAAE;YAC7DkD,KAAK,CAACnD,YAAY,GAAGrC,oBAAoB,CAAC+C,IAAI,CAACN,eAAe,CAACH,cAAc,CAAC;UAClF;QACJ;QACAkD,KAAK,CAAClB,IAAI,CAACG,IAAI,CAAC,qBAAqB,CAAC,CAACO,IAAI,CAACQ,KAAK,CAACnD,YAAY,CAAC;MACnE,CAAC,EAAE,YAAY;QACXmD,KAAK,CAACX,YAAY,GAAG,GAAG;QACxBW,KAAK,CAAClB,IAAI,CAACG,IAAI,CAAC,qBAAqB,CAAC,CAACO,IAAI,CAAC,GAAG,CAAC;QAChDQ,KAAK,CAAClB,IAAI,CAACG,IAAI,CAAC,qBAAqB,CAAC,CAACO,IAAI,CAAC,GAAG,CAAC;MACpD,CAAC,CAAC;IACN;EACJ,CAAC;EAED,IAAI,CAAC2B,IAAI,GAAG,UAAU5E,EAAE,EAAE;IACtB,IAAI,CAACA,EAAE,EAAE;MACL1B,KAAK,CAACuG,IAAI,CAACC,IAAI,CAACxG,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,sBAAsB,CAAC,CAAC;MAC7D;IACJ;IACA,IAAI;MACA,IAAItC,KAAK,CAACyG,QAAQ,CAACC,WAAW,IAAI,GAAG,EAAE;QACnC,IAAIjF,IAAI,GAAG;UACPE,KAAK,EAAE3B,KAAK,CAAC2G,KAAK,CAACC,SAAS,CAAClE,IAAI,CAACf,KAAK,IAAIe,IAAI,CAACd,IAAI,EAAE,EAAE,CAAC;UACzDF,EAAE,EAAEA,EAAE;UACNmF,OAAO,EAAE,IAAI;UACbC,GAAG,EAAE,kCAAkC,GAAGpF,EAAE;UAC5CqF,IAAI,EAAE,4DAA4D,GAAGrF,EAAE,GAAG,kBAAkB;UAC5FsF,QAAQ,EAAE;QACd,CAAC;QACDhH,KAAK,CAACiH,MAAM,CAACX,IAAI,CAAC7E,IAAI,CAAC;QACvBzB,KAAK,CAACiH,MAAM,CAACC,QAAQ,CAAC,CAACzF,IAAI,CAAC,CAAC;MACjC,CAAC,MAAM;QACHzB,KAAK,CAACmH,OAAO,CAACb,IAAI,CAAC5E,EAAE,CAAC;MAC1B;IACJ,CAAC,CAAC,OAAO0F,CAAC,EAAE;MACRpH,KAAK,CAACuG,IAAI,CAACC,IAAI,CAAC,gCAAgC,GAAGY,CAAC,CAACC,OAAO,CAAC;IACjE;EACJ,CAAC;EAED,IAAI,CAAC5C,MAAM,GAAG,YAAY;IACtB,IAAI6C,MAAM,GAAG,IAAI;IACjB,IAAI,CAACtD,KAAK,CAAC,CAAC;IACZ,IAAI,CAAC,IAAI,CAACK,UAAU,EAAE;MAClB9B,GAAG,CAACE,MAAM,CAACC,IAAI,EAAE,UAAUD,MAAM,EAAE;QAC/B,IAAIgD,QAAQ,GAAGhD,MAAM,CAACtB,OAAO,GAAGsB,MAAM,CAACtB,OAAO,CAACuE,MAAM,CAAC,UAAUC,CAAC,EAAE;UAC/D,OAAOA,CAAC,CAACvE,IAAI,KAAK,SAAS;QAC/B,CAAC,CAAC,GAAG,EAAE;QACP,IAAIqE,QAAQ,CAACrC,MAAM,KAAK,CAAC,EAAE;UACvBkE,MAAM,CAACrD,IAAI,GAAG,IAAI;UAClB;QACJ;QACAqD,MAAM,CAACrD,IAAI,CAACsD,EAAE,CAAC,aAAa,EAAE,UAAUH,CAAC,EAAEI,QAAQ,EAAE;UACjDxH,KAAK,CAACyH,UAAU,CAACC,MAAM,CAACJ,MAAM,CAACzC,iBAAiB,CAACnC,IAAI,CAAC,CAAC;UACvD4E,MAAM,CAACK,OAAO,CAACP,CAAC,CAACQ,MAAM,EAAElF,IAAI,EAAE8E,QAAQ,CAAC;UACxCF,MAAM,CAAC9B,eAAe,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC+B,EAAE,CAAC,aAAa,EAAE,YAAY;UAC7B,IAAI3B,cAAc,GAAGxF,oBAAoB,CAAC,CAAC;UAC3C,IAAI0C,KAAK,GAAG2C,QAAQ,CAACrB,IAAI,CAAC,UAAUuB,CAAC,EAAE;YACnC,OAAOC,cAAc,CAACC,QAAQ,CAACF,CAAC,CAACG,SAAS,CAAC;UAC/C,CAAC,CAAC,IAAIL,QAAQ,CAAC,CAAC,CAAC;UACjB,IAAI3C,KAAK,IAAIA,KAAK,CAACnC,GAAG,EAAE;YACpB,IAAIiF,cAAc,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI9C,KAAK,CAACgD,SAAS,KAAK,IAAI,IAAIhD,KAAK,CAACgD,SAAS,KAAK,IAAI,EAAE;cACpF9F,KAAK,CAACuG,IAAI,CAACC,IAAI,CAACxG,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,wBAAwB,CAAC,CAAC;YACnE,CAAC,MAAM,IAAIsD,cAAc,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI9C,KAAK,CAACgD,SAAS,KAAK,IAAI,IAAIhD,KAAK,CAACgD,SAAS,KAAK,IAAI,EAAE;cAC3F9F,KAAK,CAACuG,IAAI,CAACC,IAAI,CAACxG,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,wBAAwB,CAAC,CAAC;YACnE;YACAgF,MAAM,CAAChB,IAAI,CAACxD,KAAK,CAACnC,GAAG,CAAC;UAC1B,CAAC,MAAM;YACHX,KAAK,CAACuG,IAAI,CAACC,IAAI,CAACxG,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,sBAAsB,CAAC,CAAC;UACjE;QACJ,CAAC,CAAC,CAACiF,EAAE,CAAC,YAAY,EAAE,YAAY;UAC5B,IAAIhG,KAAK,GAAG,CAAC;YACTI,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,eAAe,CAAC;YAC5CuF,IAAI,EAAE;UACV,CAAC,CAAC;UACF7H,KAAK,CAAC8H,OAAO,CAACC,KAAK,CAAC,YAAY;YAC5BxF,GAAG,CAACC,KAAK,CAAC,CAAC;YACXxC,KAAK,CAAC8H,OAAO,CAACE,IAAI,CAAC,CAAC;UACxB,CAAC,CAAC;UACFzG,KAAK,CAAC0G,IAAI,CAAC;YACPtG,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC;YAC7C4F,SAAS,EAAE;UACf,CAAC,CAAC;UACFzC,QAAQ,CAACnC,OAAO,CAAC,UAAUR,KAAK,EAAE;YAC9B,IAAIA,KAAK,CAACnC,GAAG,IAAIP,oBAAoB,CAAC,CAAC,CAACyF,QAAQ,CAAC/C,KAAK,CAACgD,SAAS,CAAC,EAAE;cAC/DvE,KAAK,CAAC0G,IAAI,CAAC;gBACPtG,KAAK,EAAEmB,KAAK,CAAClB,IAAI,IAAI,SAAS;gBAC9BF,EAAE,EAAEoB,KAAK,CAACnC,GAAG;gBACbwH,QAAQ,EAAErF,KAAK,CAACgD;cACpB,CAAC,CAAC;YACN;UACJ,CAAC,CAAC;UACF9F,KAAK,CAACoI,MAAM,CAAC5B,IAAI,CAAC;YACd7E,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,cAAc,CAAC;YAC3Cf,KAAK,EAAEA,KAAK;YACZ8G,QAAQ,EAAE,SAASA,QAAQA,CAAC5G,IAAI,EAAE;cAC9BzB,KAAK,CAACsI,UAAU,CAACC,MAAM,CAAC,SAAS,CAAC;cAClC,IAAI9G,IAAI,CAACoG,IAAI,EAAE;gBACX7H,KAAK,CAACwI,QAAQ,CAACP,IAAI,CAAC;kBAChBnB,GAAG,EAAE,EAAE;kBACP2B,SAAS,EAAE,MAAM;kBACjB/G,EAAE,EAAEgB,IAAI,CAAChB,EAAE;kBACXgH,MAAM,EAAEhG,IAAI,CAACd,IAAI,GAAG,IAAI,GAAG,OAAO;kBAClCqC,IAAI,EAAEvB,IAAI;kBACViG,MAAM,EAAE;gBACZ,CAAC,CAAC;cACN,CAAC,MAAM;gBACHrB,MAAM,CAAChB,IAAI,CAAC7E,IAAI,CAACC,EAAE,CAAC;cACxB;YACJ,CAAC;YACDkH,MAAM,EAAE,SAASA,MAAMA,CAAA,EAAG;cACtB5I,KAAK,CAACsI,UAAU,CAACC,MAAM,CAAC,SAAS,CAAC;YACtC;UACJ,CAAC,CAAC;QACN,CAAC,CAAC;QACFjB,MAAM,CAACpC,KAAK,CAAC,CAAC;QACdoC,MAAM,CAAC9B,eAAe,CAAC,CAAC;MAC5B,CAAC,EAAE,YAAY;QACX8B,MAAM,CAACrD,IAAI,GAAG,IAAI;MACtB,CAAC,CAAC;IACN,CAAC,MAAM;MACH,IAAI,CAACA,IAAI,CAACsD,EAAE,CAAC,aAAa,EAAE,UAAUH,CAAC,EAAEI,QAAQ,EAAE;QAC/CxH,KAAK,CAACyH,UAAU,CAACC,MAAM,CAACJ,MAAM,CAACzC,iBAAiB,CAACnC,IAAI,CAAC,CAAC;QACvD4E,MAAM,CAACK,OAAO,CAACP,CAAC,CAACQ,MAAM,EAAElF,IAAI,EAAE8E,QAAQ,CAAC;MAC5C,CAAC,CAAC,CAACD,EAAE,CAAC,aAAa,EAAE,YAAY;QAC7BD,MAAM,CAAChB,IAAI,CAAC5D,IAAI,CAAChB,EAAE,CAAC;MACxB,CAAC,CAAC;MACF,IAAI,CAACwD,KAAK,CAAC,CAAC;IAChB;EACJ,CAAC;EAED,IAAI,CAAC2D,OAAO,GAAG,YAAY;IACvB,IAAI,IAAI,CAAC1E,GAAG,EAAE;MACV,IAAI,CAACA,GAAG,CAACmB,OAAO,GAAG,IAAI;MACvB,IAAI,CAACnB,GAAG,CAACiB,MAAM,GAAG,IAAI;MACtB,IAAI,CAACjB,GAAG,CAACoB,GAAG,GAAG,EAAE;IACrB;IACA,IAAI,IAAI,CAACtB,IAAI,EAAE;MACX,IAAI,CAACA,IAAI,CAACW,MAAM,CAAC,CAAC;MAClB,IAAI,CAACX,IAAI,GAAG,IAAI;IACpB;IACA,IAAI,CAACE,GAAG,GAAG,IAAI;EACnB,CAAC;EAED,IAAI,CAAC2E,OAAO,GAAG,YAAY;IACvB,IAAI,IAAI,CAACC,QAAQ,IAAI,CAAC,IAAI,CAAC9E,IAAI,EAAE;IACjC,IAAIF,MAAM,CAAC3C,IAAI,KAAK,QAAQ,EAAE;MAC1B,IAAI,CAAC+C,GAAG,CAACoB,GAAG,GAAG,6BAA6B,GAAG7C,IAAI,CAAChB,EAAE,GAAG,gBAAgB;IAC7E,CAAC,MAAM,IAAIgB,IAAI,CAACZ,aAAa,EAAE;MAC3B,IAAI,CAACqC,GAAG,CAACoB,GAAG,GAAGvF,KAAK,CAACuC,GAAG,CAAC4B,GAAG,CAACzB,IAAI,CAACZ,aAAa,EAAE,MAAM,CAAC;IAC5D,CAAC,MAAM,IAAIY,IAAI,CAACb,WAAW,EAAE;MACzB,IAAI,CAACsC,GAAG,CAACoB,GAAG,GAAGvF,KAAK,CAACuC,GAAG,CAAC4B,GAAG,CAACzB,IAAI,CAACb,WAAW,CAAC;IAClD,CAAC,MAAM;MACH,IAAI,CAACsC,GAAG,CAACoB,GAAG,GAAG,sBAAsB;IACzC;IACA,IAAI,CAACwD,QAAQ,GAAG,IAAI;EACxB,CAAC;EAED,IAAI,CAACC,MAAM,GAAG,YAAY;IACtB,OAAO,IAAI,CAAC/E,IAAI,IAAIgF,CAAC,CAAC,aAAa,CAAC;EACxC,CAAC;AACL;;;AClPuC;AAEvC,SAASC,IAAIA,CAACxG,IAAI,EAAE;EAChBjC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CAAC,CAAC;EACxC,IAAI,CAACgC,IAAI,GAAGA,IAAI;EAChB,IAAI,CAACyG,KAAK,GAAG,EAAE;EAEf,IAAI,CAAC1E,MAAM,GAAG,YAAY;IACtBhE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAAC,CAAC;IACnC,IAAI,CAACyI,KAAK,GAAG,EAAE;IACf,IAAI,CAACzG,IAAI,CAACvB,OAAO,CAACmC,OAAO,CAAC7B,IAAI,IAAI;MAC9B,MAAMwC,IAAI,GAAG,IAAIH,OAAO,CAACrC,IAAI,EAAE;QAAEL,IAAI,EAAE,IAAI,CAACsB,IAAI,CAACtB;MAAK,CAAC,CAAC;MACxD6C,IAAI,CAACQ,MAAM,CAAC,CAAC;MACb,IAAI,CAAC0E,KAAK,CAAClB,IAAI,CAAChE,IAAI,CAAC;IACzB,CAAC,CAAC;EACN,CAAC;EAED,IAAI,CAAC+E,MAAM,GAAG,YAAY;IACtBvI,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAAC,CAAC;IACnC,MAAM0I,OAAO,GAAGpJ,KAAK,CAACkE,QAAQ,CAAChE,GAAG,CAAC,MAAM,EAAE;MAAEyB,KAAK,EAAE,IAAI,CAACe,IAAI,CAACf;IAAM,CAAC,CAAC;IACtE,IAAI,CAACwH,KAAK,CAAC7F,OAAO,CAACW,IAAI,IAAI;MACvB,MAAMoF,WAAW,GAAGpF,IAAI,CAAC+E,MAAM,CAAC,CAAC;MACjC,IAAIK,WAAW,IAAIA,WAAW,CAACjG,MAAM,EAAE;QACnCgG,OAAO,CAAChF,IAAI,CAAC,cAAc,CAAC,CAAC9C,MAAM,CAAC+H,WAAW,CAAC;MACpD;IACJ,CAAC,CAAC;IACF,OAAOD,OAAO;EAClB,CAAC;EAED,IAAI,CAACP,OAAO,GAAG,YAAY;IACvBpI,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAAC,CAAC;IACpC,IAAI,CAACyI,KAAK,CAAC7F,OAAO,CAACW,IAAI,IAAI;MACvBA,IAAI,CAAC4E,OAAO,CAAC,CAAC;IAClB,CAAC,CAAC;IACF,IAAI,CAACM,KAAK,GAAG,EAAE;EACnB,CAAC;EAED,IAAI,CAACZ,MAAM,GAAG,YAAY;IACtB,IAAI,IAAI,CAACY,KAAK,CAAC/F,MAAM,EAAE;MACnBpD,KAAK,CAACsI,UAAU,CAACgB,aAAa,CAAC,IAAI,CAACN,MAAM,CAAC,CAAC,CAAC;MAC7ChJ,KAAK,CAACsI,UAAU,CAACiB,eAAe,CAAC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAC,CAACH,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAACA,MAAM,CAAC,CAAC,CAAC;IAC9E;EACJ,CAAC;EAED,IAAI,CAACQ,MAAM,GAAG,YAAY,CAAC,CAAC;EAC5B,IAAI,CAACC,IAAI,GAAG,YAAY,CAAC,CAAC;EAC1B,IAAI,CAACb,MAAM,GAAG,YAAY,CAAC,CAAC;AAChC;AAEgB,CAAC;;ACjDe;AACC;AAEjC,SAASc,SAASA,CAACC,MAAM,EAAE;EACvB,IAAIC,MAAM;EACV,IAAIrI,KAAK,GAAG,EAAE;EACd,IAAIsI,MAAM,GAAG,CAAC;EACd,IAAIC,KAAK;EAET,IAAI,CAACrF,MAAM,GAAG,YAAY;IACtBhE,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CAAC,CAAC;IACxC,IAAI;MACAkJ,MAAM,GAAGX,CAAC,CAAC,wCAAwC,CAAC;MACpD,IAAIc,IAAI,GAAG,EAAE;MACb,IAAI,CAAC/J,KAAK,CAACgK,QAAQ,CAACC,EAAE,CAAC,OAAO,CAAC,EAAE;QAC7BF,IAAI,CAAC9B,IAAI,CAAC;UACNtG,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC;UAC7C6F,QAAQ,EAAEnI,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,sBAAsB,CAAC;UACtDE,KAAK,EAAE;QACX,CAAC,CAAC;MACN;MACAxC,KAAK,CAAC0J,SAAS,CAACQ,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC;MACrC,IAAI,CAAClG,KAAK,CAAC,CAAC;IAChB,CAAC,CAAC,OAAOoD,CAAC,EAAE;MACR3G,OAAO,CAACY,KAAK,CAAC,4BAA4B,EAAE+F,CAAC,CAAC;MAC9CwC,MAAM,CAACtI,MAAM,CAAC,+BAA+B,GAAGtB,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC,GAAG,QAAQ,CAAC;IACtG;EACJ,CAAC;EAED,IAAI,CAAC0B,KAAK,GAAG,YAAY;IACrBvD,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC;IACvC,IAAI;MACA,IAAI,CAACV,KAAK,CAACmD,MAAM,EAAE;QACf1C,OAAO,CAACY,KAAK,CAAC,2BAA2B,CAAC;QAC1CuI,MAAM,CAACtI,MAAM,CAAC,+BAA+B,GAAGtB,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC,GAAG,QAAQ,CAAC;QAClG;MACJ;MACA,IAAIpB,MAAM,GAAG,IAAIlB,KAAK,CAACmD,MAAM,CAAC,CAAC,CAAC;MAChC,IAAIhC,OAAO,GAAG,CAAC,CAAC;MAChBD,MAAM,CAACmC,UAAU,GAAG,YAAY;QAC5B5C,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAES,OAAO,CAAC,CAAC,CAAC;QAC3C,IAAIgJ,QAAQ,GAAG,KAAK;QACpB,KAAK,IAAI5G,CAAC,IAAIpC,OAAO,EAAE;UACnB,IAAIA,OAAO,CAACoC,CAAC,CAAC,CAACpC,OAAO,IAAIA,OAAO,CAACoC,CAAC,CAAC,CAACpC,OAAO,CAACiC,MAAM,EAAE;YACjD,IAAI,CAAC9B,MAAM,CAACH,OAAO,CAACoC,CAAC,CAAC,CAAC;YACvB4G,QAAQ,GAAG,IAAI;UACnB;QACJ;QACA,IAAI,CAACA,QAAQ,EAAE;UACX1J,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAAC,CAAC;UACpCkJ,MAAM,CAACtI,MAAM,CAAC,+BAA+B,GAAGtB,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC,GAAG,QAAQ,CAAC;QACtG;QACA,IAAIwH,KAAK,EAAE9J,KAAK,CAACyH,UAAU,CAAC2C,WAAW,CAAC,EAAE,CAAC;QAC3C,IAAI,CAACC,QAAQ,CAACC,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,CAACD,QAAQ,CAAC9B,MAAM,CAAC,CAAC;MAC1B,CAAC,CAACgC,IAAI,CAAC,IAAI,CAAC;MACZ9G,IAAI,CAACvC,MAAM,EAAEC,OAAO,CAAC;IACzB,CAAC,CAAC,OAAOiG,CAAC,EAAE;MACR3G,OAAO,CAACY,KAAK,CAAC,2BAA2B,EAAE+F,CAAC,CAAC;MAC7CwC,MAAM,CAACtI,MAAM,CAAC,+BAA+B,GAAGtB,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC,GAAG,QAAQ,CAAC;IACtG;EACJ,CAAC;EAED,IAAI,CAAChB,MAAM,GAAG,UAAU8H,OAAO,EAAE;IAC7B3I,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE0I,OAAO,CAAC,CAAC,CAAC;IAClD,IAAI;MACA,IAAI3H,IAAI,GAAG,IAAIyH,IAAI,CAACE,OAAO,CAAC;MAC5B3H,IAAI,CAACgD,MAAM,CAAC,CAAC;MACbhD,IAAI,CAAC+H,MAAM,GAAG,IAAI,CAACgB,IAAI,CAACD,IAAI,CAAC,IAAI,CAAC;MAClC9I,IAAI,CAACgI,IAAI,GAAG,IAAI,CAACgB,EAAE,CAACF,IAAI,CAAC,IAAI,CAAC;MAC9B9I,IAAI,CAACmH,MAAM,GAAG,IAAI,CAAC8B,IAAI,CAACH,IAAI,CAAC,IAAI,CAAC;MAClC9I,IAAI,CAACkJ,QAAQ,GAAG,YAAY;QACxBd,MAAM,GAAGtI,KAAK,CAACqJ,OAAO,CAACnJ,IAAI,CAAC;MAChC,CAAC;MACDA,IAAI,CAACoJ,IAAI,GAAG5B,CAAC,CAAC,aAAa,CAAC;MAC5B,IAAIa,KAAK,EAAE;QACPF,MAAM,CAACtI,MAAM,CAACG,IAAI,CAACoJ,IAAI,CAAC;MAC5B,CAAC,MAAM;QACHjB,MAAM,CAACtI,MAAM,CAACG,IAAI,CAACuH,MAAM,CAAC,CAAC,CAAC;MAChC;MACAzH,KAAK,CAAC0G,IAAI,CAACxG,IAAI,CAAC;IACpB,CAAC,CAAC,OAAO2F,CAAC,EAAE;MACR3G,OAAO,CAACY,KAAK,CAAC,4BAA4B,EAAE+F,CAAC,CAAC;IAClD;EACJ,CAAC;EAED,IAAI,CAACoD,IAAI,GAAG,YAAY,CAAE,UAAW;EACrC,IAAI,CAACC,EAAE,GAAG,YAAY,CAAE,UAAW;EACnC,IAAI,CAACC,IAAI,GAAG,YAAY,CAAE,UAAW;EACrC,IAAI,CAAC3C,KAAK,GAAG,YAAY,CAAE,UAAW;EACtC,IAAI,CAACsC,QAAQ,GAAGV,MAAM,CAACU,QAAQ;EAC/B,IAAI,CAACxB,OAAO,GAAG,YAAY,CAAE,UAAW;AAC5C;;;AC5FO,MAAMiC,YAAY,GAAG;EACxBC,gBAAgB,EAAE;IACdC,EAAE,EAAE,YAAY;IAChBC,EAAE,EAAE,WAAW;IACfC,EAAE,EAAE;EACR,CAAC;EACDC,oBAAoB,EAAE;IAClBH,EAAE,EAAE,WAAW;IACfC,EAAE,EAAE,WAAW;IACfC,EAAE,EAAE;EACR,CAAC;EACDE,wBAAwB,EAAE;IACtBJ,EAAE,EAAE,kBAAkB;IACtBC,EAAE,EAAE,kBAAkB;IACtBC,EAAE,EAAE;EACR,CAAC;EACDG,uBAAuB,EAAE;IACrBL,EAAE,EAAE,oBAAoB;IACxBC,EAAE,EAAE,mBAAmB;IACvBC,EAAE,EAAE;EACR,CAAC;EACDI,2BAA2B,EAAE;IACzBN,EAAE,EAAE,wBAAwB;IAC5BC,EAAE,EAAE,wBAAwB;IAC5BC,EAAE,EAAE;EACR,CAAC;EACDK,wBAAwB,EAAE;IACtBP,EAAE,EAAE,mBAAmB;IACvBC,EAAE,EAAE,mBAAmB;IACvBC,EAAE,EAAE;EACR,CAAC;EACDM,oBAAoB,EAAE;IAClBR,EAAE,EAAE,eAAe;IACnBC,EAAE,EAAE,iBAAiB;IACrBC,EAAE,EAAE;EACR,CAAC;EACDO,sBAAsB,EAAE;IACpBT,EAAE,EAAE,0BAA0B;IAC9BC,EAAE,EAAE,6BAA6B;IACjCC,EAAE,EAAE;EACR,CAAC;EACDQ,sBAAsB,EAAE;IACpBV,EAAE,EAAE,uBAAuB;IAC3BC,EAAE,EAAE,4BAA4B;IAChCC,EAAE,EAAE;EACR,CAAC;EACDS,aAAa,EAAE;IACXX,EAAE,EAAE,WAAW;IACfC,EAAE,EAAE,YAAY;IAChBC,EAAE,EAAE;EACR,CAAC;EACDU,cAAc,EAAE;IACZZ,EAAE,EAAE,UAAU;IACdC,EAAE,EAAE,UAAU;IACdC,EAAE,EAAE;EACR,CAAC;EACDW,eAAe,EAAE;IACbb,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE;EACR,CAAC;EACDY,qBAAqB,EAAE;IACnBd,EAAE,EAAE,SAAS;IACbC,EAAE,EAAE,UAAU;IACdC,EAAE,EAAE;EACR,CAAC;EACDa,oBAAoB,EAAE;IAClBf,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE,SAAS;IACbC,EAAE,EAAE;EACR,CAAC;EACDc,qBAAqB,EAAE;IACnBhB,EAAE,EAAE,OAAO;IACXC,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE;EACR,CAAC;EACDe,oBAAoB,EAAE;IAClBjB,EAAE,EAAE,KAAK;IACTC,EAAE,EAAE,KAAK;IACTC,EAAE,EAAE;EACR,CAAC;EACDgB,eAAe,EAAE;IACblB,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE,QAAQ;IACZC,EAAE,EAAE;EACR,CAAC;EACDiB,eAAe,EAAE;IACbnB,EAAE,EAAE,SAAS;IACbC,EAAE,EAAE,SAAS;IACbC,EAAE,EAAE;EACR,CAAC;EACDkB,aAAa,EAAE;IACXpB,EAAE,EAAE,KAAK;IACTC,EAAE,EAAE,IAAI;IACRC,EAAE,EAAE;EACR,CAAC;EACDmB,uBAAuB,EAAE;IACrBrB,EAAE,EAAE,mBAAmB;IACvBC,EAAE,EAAE,kBAAkB;IACtBC,EAAE,EAAE;EACR,CAAC;EACDoB,mBAAmB,EAAE;IACjBtB,EAAE,EAAE,8BAA8B;IAClCC,EAAE,EAAE,4BAA4B;IAChCC,EAAE,EAAE;EACR,CAAC;EACDqB,qBAAqB,EAAE;IACnBvB,EAAE,EAAE,gCAAgC;IACpCC,EAAE,EAAE,qCAAqC;IACzCC,EAAE,EAAE;EACR;AACJ,CAAC;AAEM,SAASsB,aAAaA,CAAA,EAAG;EAC5BxM,KAAK,CAACkE,QAAQ,CAACgG,GAAG,CAAC,SAAS,EAAE,oWAAoW,CAAC;EACnYlK,KAAK,CAACkE,QAAQ,CAACgG,GAAG,CAAC,eAAe,EAAE,27CAA27C,CAAC;AACp+C;;ACpHuC;AACN;AACuB;AACzB;AAC8B;AAE7D,SAASwC,WAAWA,CAAA,EAAG;EACnB,IAAI1H,MAAM,CAAC2H,qBAAqB,EAAE;EAClC3H,MAAM,CAAC2H,qBAAqB,GAAG,IAAI;;EAEnC;EACA3M,KAAK,CAACqC,IAAI,CAAC6H,GAAG,CAACY,YAAY,CAAC;;EAE5B;EACA9K,KAAK,CAAC0J,SAAS,CAACQ,GAAG,CAAC,eAAe,EAAEuC,qCAAW,CAAC;EACjDzM,KAAK,CAAC0J,SAAS,CAACQ,GAAG,CAAC,eAAe,EAAER,SAAS,CAAC;;EAE/C;EACA8C,aAAa,CAAC,CAAC;EAEf,SAAStC,GAAGA,CAAA,EAAG;IACX,IAAI0C,MAAM,GAAG3D,CAAC,CAAC,mtBAAmtB,GAAGjJ,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC,GAAG,aAAa,CAAC;IAC5xBsK,MAAM,CAACrF,EAAE,CAAC,aAAa,EAAE,YAAY;MACjCvH,KAAK,CAACwI,QAAQ,CAACP,IAAI,CAAC;QAChBnB,GAAG,EAAE,EAAE;QACPnF,KAAK,EAAE3B,KAAK,CAACqC,IAAI,CAACC,SAAS,CAAC,gBAAgB,CAAC;QAC7CmG,SAAS,EAAE,eAAe;QAC1BoE,IAAI,EAAE;MACV,CAAC,CAAC;IACN,CAAC,CAAC;IACF5D,CAAC,CAAC,mBAAmB,CAAC,CAAC6D,EAAE,CAAC,CAAC,CAAC,CAACxL,MAAM,CAACsL,MAAM,CAAC;IAC3C3D,CAAC,CAAC,MAAM,CAAC,CAAC3H,MAAM,CAACtB,KAAK,CAACkE,QAAQ,CAAChE,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/DF,KAAK,CAACC,OAAO,CAAC8M,QAAQ,CAACC,MAAM,CAAC,QAAQ,EAAE,UAAUC,KAAK,EAAE;MACrD,IAAIA,KAAK,CAACrL,IAAI,KAAK,UAAU,EAAE;QAC3BW,GAAG,CAACC,KAAK,CAAC,CAAC;MACf;IACJ,CAAC,CAAC;EACN;EAEA,IAAIxC,KAAK,CAAC6C,IAAI,IAAI7C,KAAK,CAAC6C,IAAI,CAAClC,GAAG,CAAC,CAAC,EAAE;IAChCuJ,GAAG,CAAC,CAAC;EACT,CAAC,MAAM;IACHlK,KAAK,CAACuG,IAAI,CAACC,IAAI,CAAC,4DAA4D,CAAC;EACjF;AACJ;;AAEA;AACA,IAAI,CAACxB,MAAM,CAACkI,QAAQ,EAAE;EAClBlN,KAAK,CAACmN,QAAQ,CAACH,MAAM,CAAC,KAAK,EAAE,UAAU5F,CAAC,EAAE;IACtC,IAAIA,CAAC,CAAChG,IAAI,KAAK,OAAO,EAAE;MACpBsL,WAAW,CAAC,CAAC;IACjB;EACJ,CAAC,CAAC;AACN,CAAC,MAAM;EACHA,WAAW,CAAC,CAAC;AACjB,C","sources":["webpack://lampa-plugins/webpack/bootstrap","webpack://lampa-plugins/webpack/runtime/define property getters","webpack://lampa-plugins/webpack/runtime/hasOwnProperty shorthand","webpack://lampa-plugins/webpack/runtime/make namespace object","webpack://lampa-plugins/./t2/utils.js","webpack://lampa-plugins/./t2/api.js","webpack://lampa-plugins/./t2/trailer.js","webpack://lampa-plugins/./t2/line.js","webpack://lampa-plugins/./t2/component.js","webpack://lampa-plugins/./t2/templates.js","webpack://lampa-plugins/./t2/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export function debounce(func, wait) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            func.apply(context, args);\n        }, wait);\n    };\n}\n\nexport function getFormattedDate(daysAgo) {\n    var today = new Date();\n    if (daysAgo) today.setDate(today.getDate() - daysAgo);\n    var year = today.getFullYear();\n    var month = String(today.getMonth() + 1).padStart(2, '0');\n    var day = String(today.getDate()).padStart(2, '0');\n    return year + '-' + month + '-' + day;\n}\n\nexport function formatDateToDDMMYYYY(dateStr) {\n    if (!dateStr) return '-';\n    var date = new Date(dateStr);\n    var day = String(date.getDate()).padStart(2, '0');\n    var month = String(date.getMonth() + 1).padStart(2, '0');\n    var year = date.getFullYear();\n    return day + '.' + month + '.' + year;\n}\n\nexport function getRegion() {\n    var lang = Lampa.Storage.get('language', 'ru');\n    return lang === 'uk' ? 'UA' : lang === 'ru' ? 'RU' : 'US';\n}\n\nexport function getInterfaceLanguage() {\n    return Lampa.Storage.get('language', 'ru');\n}\n\nexport function getPreferredLanguage() {\n    var lang = Lampa.Storage.get('language', 'ru');\n    if (lang === 'uk') {\n        return ['uk', 'en'];\n    } else if (lang === 'ru') {\n        return ['ru', 'en'];\n    } else {\n        return ['en'];\n    }\n}\n","import { getRegion, getInterfaceLanguage } from './utils.js';\n\nvar trailerCache = {};\nvar categoryCache = {};\nvar CACHE_TTL = 24 * 60 * 60 * 1000;\n\nfunction clearExpiredCache() {\n    console.log('Clearing expired cache'); // Діагностика\n    for (var key in trailerCache) {\n        if (trailerCache[key].timestamp && Date.now() - trailerCache[key].timestamp > CACHE_TTL) {\n            delete trailerCache[key];\n        }\n    }\n    for (var key in categoryCache) {\n        if (categoryCache[key].timestamp && Date.now() - categoryCache[key].timestamp > CACHE_TTL) {\n            delete categoryCache[key];\n            Lampa.Storage.set('trailer_category_cache_' + key, null);\n        }\n    }\n}\n\nsetInterval(clearExpiredCache, 3600 * 1000);\n\nfunction finalizeResults(json, status, results, type) {\n    console.log('finalizeResults called:', { json, type }); // Діагностика\n    if (!json.results) {\n        console.error('No results in JSON:', json);\n        status.append({}, {});\n        return;\n    }\n    var items = json.results.map(function (item) {\n        return {\n            id: item.id,\n            title: item.title || item.name,\n            poster_path: item.poster_path,\n            backdrop_path: item.backdrop_path,\n            vote_average: item.vote_average,\n            release_date: item.release_date || item.first_air_date,\n            original_title: item.original_title,\n            original_name: item.original_name,\n            name: item.name,\n            release_details: item.release_details || {}\n        };\n    });\n    results[type] = {\n        title: Lampa.Lang.translate('trailers_' + type),\n        results: items,\n        type: type\n    };\n    status.append({}, {});\n}\n\nvar Api = {\n    clear: function clear() {\n        trailerCache = {};\n        categoryCache = {};\n    },\n    videos: function videos(data, success, fail) {\n        var key = data.id + '_' + (data.name ? 'tv' : 'movie');\n        if (trailerCache[key] && trailerCache[key].timestamp && Date.now() - trailerCache[key].timestamp < CACHE_TTL) {\n            success(trailerCache[key].data);\n        } else {\n            Lampa.TMDB.video(data.id, data.name ? 'tv' : 'movie', function (json) {\n                trailerCache[key] = {\n                    data: json,\n                    timestamp: Date.now()\n                };\n                success(json);\n            }, fail);\n        }\n    },\n    getLocalMoviesInTheaters: function getLocalMoviesInTheaters(status, results) {\n        console.log('getLocalMoviesInTheaters called'); // Діагностика\n        var key = 'in_theaters_' + getRegion();\n        if (categoryCache[key] && categoryCache[key].timestamp && Date.now() - categoryCache[key].timestamp < CACHE_TTL) {\n            finalizeResults(categoryCache[key].data, status, results, 'in_theaters');\n        } else {\n            var today = new Date();\n            var priorDate = new Date(new Date().setDate(today.getDate() - 30));\n            var dateString = priorDate.getFullYear() + '-' + (priorDate.getMonth() + 1) + '-' + priorDate.getDate();\n            Lampa.TMDB.api('discover/movie?region=' + getRegion() + '&language=' + getInterfaceLanguage() + '&sort_by=popularity.desc&release_date.gte=' + dateString + '&with_release_type=3|2', function (json) {\n                console.log('TMDB response:', json); // Діагностика\n                if (json.results) {\n                    var status = new Lampa.Status(json.results.length);\n                    status.onComplite = function () {\n                        finalizeResults(json, status, results, 'in_theaters');\n                    };\n                    json.results.forEach(function (item, i) {\n                        Lampa.TMDB.release(item.id, 'movie', function (release) {\n                            json.results[i].release_details = release;\n                            status.append(item.id, {});\n                        }, function () {\n                            status.append(item.id, {});\n                        });\n                    });\n                    categoryCache[key] = {\n                        data: json,\n                        timestamp: Date.now()\n                    };\n                    Lampa.Storage.set('trailer_category_cache_' + key, categoryCache[key]);\n                } else {\n                    console.error('No results for in_theaters'); // Діагностика\n                    status.append({}, {});\n                }\n            }, function () {\n                console.error('TMDB request failed'); // Діагностика\n                status.append({}, {});\n            });\n        }\n    },\n    // ... (інші методи, як getUpcomingMovies, getNewSeriesSeasons тощо, залишаються без змін)\n};\n\nfunction main(status, results) {\n    console.log('main called:', { status, results }); // Діагностика\n    if (!(status instanceof Lampa.Status)) {\n        console.error('Invalid status object:', status);\n        return;\n    }\n    Api.getLocalMoviesInTheaters(status, results);\n    Api.getUpcomingMovies(status, results);\n    Api.getNewSeriesSeasons(status, results);\n    Api.getUpcomingSeries(status, results);\n    Api.getPopularTrailers(status, results);\n}\n\nexport { Api, main };\n","import { Api } from './api.js';\nimport { formatDateToDDMMYYYY, getRegion, getPreferredLanguage } from './utils.js';\n\nfunction Trailer(data, params) {\n    this.build = function () {\n        this.card = Lampa.Template.get('trailer', data);\n        this.img = this.card.find('img')[0];\n        this.is_youtube = params.type === 'rating';\n        this.rating = data.vote_average ? data.vote_average.toFixed(1) : '-';\n        this.trailer_lang = '';\n        this.release_date = '-';\n        if (!this.is_youtube) {\n            var create = ((data.release_date || data.first_air_date || '0000') + '').slice(0, 4);\n            var title = data.title || data.name || data.original_title || data.original_name;\n            this.card.find('.card__title').text(title);\n            this.card.find('.card__details').text(create + ' - ' + (data.original_title || data.original_name));\n            if (this.rating !== '-') {\n                this.card.find('.card__view').append('<div class=\"card__rating\">' + this.rating + '</div>');\n            } else {\n                this.card.find('.card__view').append('<div class=\"card__rating\">-</div>');\n            }\n            this.card.find('.card__view').append('<div class=\"card__trailer-lang\"></div>');\n            this.card.find('.card__view').append('<div class=\"card__release-date\"></div>');\n        } else {\n            this.card.find('.card__title').text(data.name);\n            this.card.find('.card__details').remove();\n        }\n    };\n\n    this.cardImgBackground = function (card_data) {\n        if (Lampa.Storage.field('background')) {\n            if (Lampa.Storage.get('background_type', 'complex') === 'poster' && window.innerWidth > 790) {\n                return card_data.backdrop_path ? Lampa.Api.img(card_data.backdrop_path, 'original') : this.is_youtube ? 'https://img.youtube.com/vi/' + data.id + '/hqdefault.jpg' : '';\n            }\n            return card_data.backdrop_path ? Lampa.Api.img(card_data.backdrop_path, 'w500') : this.is_youtube ? 'https://img.youtube.com/vi/' + data.id + '/hqdefault.jpg' : '';\n        }\n        return '';\n    };\n\n    this.image = function () {\n        var _this = this;\n        this.img.onload = function () {\n            _this.card.addClass('card--loaded');\n        };\n        this.img.onerror = function () {\n            _this.img.src = './img/img_broken.svg';\n        };\n    };\n\n    this.loadTrailerInfo = function () {\n        var _this = this;\n        if (!this.is_youtube && !this.trailer_lang) {\n            Api.videos(data, function (videos) {\n                var trailers = videos.results ? videos.results.filter(function (v) {\n                    return v.type === 'Trailer';\n                }) : [];\n                var preferredLangs = getPreferredLanguage();\n                var video = trailers.find(function (v) {\n                    return preferredLangs.includes(v.iso_639_1);\n                }) || trailers[0];\n                _this.trailer_lang = video ? video.iso_639_1 : '-';\n                if (_this.trailer_lang !== '-') {\n                    _this.card.find('.card__trailer-lang').text(_this.trailer_lang.toUpperCase());\n                } else {\n                    _this.card.find('.card__trailer-lang').text('-');\n                }\n                if (params.type === 'in_theaters' || params.type === 'upcoming_movies') {\n                    if (data.release_details && data.release_details.results) {\n                        var region = getRegion();\n                        var releaseInfo = data.release_details.results.find(function (r) {\n                            return r.iso_3166_1 === region;\n                        });\n                        if (releaseInfo && releaseInfo.release_dates && releaseInfo.release_dates.length) {\n                            var releaseDate = releaseInfo.release_dates[0].release_date;\n                            _this.release_date = formatDateToDDMMYYYY(releaseDate);\n                        } else if (data.release_date) {\n                            _this.release_date = formatDateToDDMMYYYY(data.release_date);\n                        }\n                    } else if (data.release_date) {\n                        _this.release_date = formatDateToDDMMYYYY(data.release_date);\n                    }\n                } else if (params.type === 'new_series_seasons' || params.type === 'upcoming_series') {\n                    if (data.release_details && data.release_details.first_air_date) {\n                        _this.release_date = formatDateToDDMMYYYY(data.release_details.first_air_date);\n                    }\n                }\n                _this.card.find('.card__release-date').text(_this.release_date);\n            }, function () {\n                _this.trailer_lang = '-';\n                _this.card.find('.card__trailer-lang').text('-');\n                _this.card.find('.card__release-date').text('-');\n            });\n        }\n    };\n\n    this.play = function (id) {\n        if (!id) {\n            Lampa.Noty.show(Lampa.Lang.translate('trailers_no_trailers'));\n            return;\n        }\n        try {\n            if (Lampa.Manifest.app_digital >= 183) {\n                var item = {\n                    title: Lampa.Utils.shortText(data.title || data.name, 50),\n                    id: id,\n                    youtube: true,\n                    url: 'https://www.youtube.com/watch?v=' + id,\n                    icon: '<img class=\"size-youtube\" src=\"https://img.youtube.com/vi/' + id + '/default.jpg\" />',\n                    template: 'selectbox_icon'\n                };\n                Lampa.Player.play(item);\n                Lampa.Player.playlist([item]);\n            } else {\n                Lampa.YouTube.play(id);\n            }\n        } catch (e) {\n            Lampa.Noty.show('Помилка відтворення трейлера: ' + e.message);\n        }\n    };\n\n    this.create = function () {\n        var _this2 = this;\n        this.build();\n        if (!this.is_youtube) {\n            Api.videos(data, function (videos) {\n                var trailers = videos.results ? videos.results.filter(function (v) {\n                    return v.type === 'Trailer';\n                }) : [];\n                if (trailers.length === 0) {\n                    _this2.card = null;\n                    return;\n                }\n                _this2.card.on('hover:focus', function (e, is_mouse) {\n                    Lampa.Background.change(_this2.cardImgBackground(data));\n                    _this2.onFocus(e.target, data, is_mouse);\n                    _this2.loadTrailerInfo();\n                }).on('hover:enter', function () {\n                    var preferredLangs = getPreferredLanguage();\n                    var video = trailers.find(function (v) {\n                        return preferredLangs.includes(v.iso_639_1);\n                    }) || trailers[0];\n                    if (video && video.key) {\n                        if (preferredLangs[0] === 'uk' && video.iso_639_1 !== 'uk' && video.iso_639_1 !== 'en') {\n                            Lampa.Noty.show(Lampa.Lang.translate('trailers_no_ua_trailer'));\n                        } else if (preferredLangs[0] === 'ru' && video.iso_639_1 !== 'ru' && video.iso_639_1 !== 'en') {\n                            Lampa.Noty.show(Lampa.Lang.translate('trailers_no_ru_trailer'));\n                        }\n                        _this2.play(video.key);\n                    } else {\n                        Lampa.Noty.show(Lampa.Lang.translate('trailers_no_trailers'));\n                    }\n                }).on('hover:long', function () {\n                    var items = [{\n                        title: Lampa.Lang.translate('trailers_view'),\n                        view: true\n                    }];\n                    Lampa.Loading.start(function () {\n                        Api.clear();\n                        Lampa.Loading.stop();\n                    });\n                    items.push({\n                        title: Lampa.Lang.translate('title_trailers'),\n                        separator: true\n                    });\n                    trailers.forEach(function (video) {\n                        if (video.key && getPreferredLanguage().includes(video.iso_639_1)) {\n                            items.push({\n                                title: video.name || 'Trailer',\n                                id: video.key,\n                                subtitle: video.iso_639_1\n                            });\n                        }\n                    });\n                    Lampa.Select.show({\n                        title: Lampa.Lang.translate('title_action'),\n                        items: items,\n                        onSelect: function onSelect(item) {\n                            Lampa.Controller.toggle('content');\n                            if (item.view) {\n                                Lampa.Activity.push({\n                                    url: '',\n                                    component: 'full',\n                                    id: data.id,\n                                    method: data.name ? 'tv' : 'movie',\n                                    card: data,\n                                    source: 'tmdb'\n                                });\n                            } else {\n                                _this2.play(item.id);\n                            }\n                        },\n                        onBack: function onBack() {\n                            Lampa.Controller.toggle('content');\n                        }\n                    });\n                });\n                _this2.image();\n                _this2.loadTrailerInfo();\n            }, function () {\n                _this2.card = null;\n            });\n        } else {\n            this.card.on('hover:focus', function (e, is_mouse) {\n                Lampa.Background.change(_this2.cardImgBackground(data));\n                _this2.onFocus(e.target, data, is_mouse);\n            }).on('hover:enter', function () {\n                _this2.play(data.id);\n            });\n            this.image();\n        }\n    };\n\n    this.destroy = function () {\n        if (this.img) {\n            this.img.onerror = null;\n            this.img.onload = null;\n            this.img.src = '';\n        }\n        if (this.card) {\n            this.card.remove();\n            this.card = null;\n        }\n        this.img = null;\n    };\n\n    this.visible = function () {\n        if (this.visibled || !this.card) return;\n        if (params.type === 'rating') {\n            this.img.src = 'https://img.youtube.com/vi/' + data.id + '/hqdefault.jpg';\n        } else if (data.backdrop_path) {\n            this.img.src = Lampa.Api.img(data.backdrop_path, 'w500');\n        } else if (data.poster_path) {\n            this.img.src = Lampa.Api.img(data.poster_path);\n        } else {\n            this.img.src = './img/img_broken.svg';\n        }\n        this.visibled = true;\n    };\n\n    this.render = function () {\n        return this.card || $('<div></div>');\n    };\n}\n\nexport { Trailer };\n","import { Trailer } from './trailer.js';\n\nfunction Line(data) {\n    console.log('Line constructor called'); // Діагностика\n    this.data = data;\n    this.cards = [];\n\n    this.create = function () {\n        console.log('Line.create called'); // Діагностика\n        this.cards = [];\n        this.data.results.forEach(item => {\n            const card = new Trailer(item, { type: this.data.type });\n            card.create();\n            this.cards.push(card);\n        });\n    };\n\n    this.render = function () {\n        console.log('Line.render called'); // Діагностика\n        const element = Lampa.Template.get('line', { title: this.data.title });\n        this.cards.forEach(card => {\n            const cardElement = card.render();\n            if (cardElement && cardElement.length) {\n                element.find('.line__cards').append(cardElement);\n            }\n        });\n        return element;\n    };\n\n    this.destroy = function () {\n        console.log('Line.destroy called'); // Діагностика\n        this.cards.forEach(card => {\n            card.destroy();\n        });\n        this.cards = [];\n    };\n\n    this.toggle = function () {\n        if (this.cards.length) {\n            Lampa.Controller.collectionSet(this.render());\n            Lampa.Controller.collectionFocus(this.cards[0].render()[0], this.render());\n        }\n    };\n\n    this.onDown = function () {};\n    this.onUp = function () {};\n    this.onBack = function () {};\n}\n\nexport { Line }; // Явний експорт\n","import { main } from './api.js';\nimport { Line } from './line.js';\n\nfunction Component(object) {\n    var scroll;\n    var items = [];\n    var active = 0;\n    var light;\n\n    this.create = function () {\n        console.log('Component.create called'); // Діагностика\n        try {\n            scroll = $('<div class=\"trailers scroll--h\"></div>');\n            var menu = [];\n            if (!Lampa.Platform.is('tizen')) {\n                menu.push({\n                    title: Lampa.Lang.translate('settings_reset'),\n                    subtitle: Lampa.Lang.translate('trailers_clear_cache'),\n                    clear: true\n                });\n            }\n            Lampa.Component.add('trailers', this);\n            this.build();\n        } catch (e) {\n            console.error('Error in Component.create:', e);\n            scroll.append('<div class=\"trailers__empty\">' + Lampa.Lang.translate('trailers_empty') + '</div>');\n        }\n    };\n\n    this.build = function () {\n        console.log('Component.build called'); // Діагностика\n        try {\n            if (!Lampa.Status) {\n                console.error('Lampa.Status is undefined');\n                scroll.append('<div class=\"trailers__empty\">' + Lampa.Lang.translate('trailers_empty') + '</div>');\n                return;\n            }\n            var status = new Lampa.Status(5);\n            var results = {};\n            status.onComplite = function () {\n                console.log('Status completed:', results); // Діагностика\n                var hasItems = false;\n                for (var i in results) {\n                    if (results[i].results && results[i].results.length) {\n                        this.append(results[i]);\n                        hasItems = true;\n                    }\n                }\n                if (!hasItems) {\n                    console.log('No items to display'); // Діагностика\n                    scroll.append('<div class=\"trailers__empty\">' + Lampa.Lang.translate('trailers_empty') + '</div>');\n                }\n                if (light) Lampa.Background.immediately('');\n                this.activity.loader(false);\n                this.activity.toggle();\n            }.bind(this);\n            main(status, results);\n        } catch (e) {\n            console.error('Error in Component.build:', e);\n            scroll.append('<div class=\"trailers__empty\">' + Lampa.Lang.translate('trailers_empty') + '</div>');\n        }\n    };\n\n    this.append = function (element) {\n        console.log('Component.append called:', element); // Діагностика\n        try {\n            var item = new Line(element);\n            item.create();\n            item.onDown = this.down.bind(this);\n            item.onUp = this.up.bind(this);\n            item.onBack = this.back.bind(this);\n            item.onToggle = function () {\n                active = items.indexOf(item);\n            };\n            item.wrap = $('<div></div>');\n            if (light) {\n                scroll.append(item.wrap);\n            } else {\n                scroll.append(item.render());\n            }\n            items.push(item);\n        } catch (e) {\n            console.error('Error in Component.append:', e);\n        }\n    };\n\n    this.down = function () { /* ... */ };\n    this.up = function () { /* ... */ };\n    this.back = function () { /* ... */ };\n    this.start = function () { /* ... */ };\n    this.activity = object.activity;\n    this.destroy = function () { /* ... */ };\n}\n\nexport { Component };\n","export const translations = {\n    trailers_popular: {\n        ru: 'Популярное',\n        uk: 'Популярне',\n        en: 'Popular'\n    },\n    trailers_in_theaters: {\n        ru: 'В прокате',\n        uk: 'В прокаті',\n        en: 'In Theaters'\n    },\n    trailers_upcoming_movies: {\n        ru: 'Ожидаемые фильмы',\n        uk: 'Очікувані фільми',\n        en: 'Upcoming Movies'\n    },\n    trailers_popular_series: {\n        ru: 'Популярные сериалы',\n        uk: 'Популярні серіали',\n        en: 'Popular Series'\n    },\n    trailers_new_series_seasons: {\n        ru: 'Новые сериалы и сезоны',\n        uk: 'Нові серіали та сезони',\n        en: 'New Series and Seasons'\n    },\n    trailers_upcoming_series: {\n        ru: 'Ожидаемые сериалы',\n        uk: 'Очікувані серіали',\n        en: 'Upcoming Series'\n    },\n    trailers_no_trailers: {\n        ru: 'Нет трейлеров',\n        uk: 'Немає трейлерів',\n        en: 'No trailers'\n    },\n    trailers_no_ua_trailer: {\n        ru: 'Нет украинского трейлера',\n        uk: 'Немає українського трейлера',\n        en: 'No Ukrainian trailer'\n    },\n    trailers_no_ru_trailer: {\n        ru: 'Нет русского трейлера',\n        uk: 'Немає російського трейлера',\n        en: 'No Russian trailer'\n    },\n    trailers_view: {\n        ru: 'Подробнее',\n        uk: 'Докладніше',\n        en: 'More'\n    },\n    title_trailers: {\n        ru: 'Трейлеры',\n        uk: 'Трейлери',\n        en: 'Trailers'\n    },\n    trailers_filter: {\n        ru: 'Фильтр',\n        uk: 'Фільтр',\n        en: 'Filter'\n    },\n    trailers_filter_today: {\n        ru: 'Сегодня',\n        uk: 'Сьогодні',\n        en: 'Today'\n    },\n    trailers_filter_week: {\n        ru: 'Неделя',\n        uk: 'Тиждень',\n        en: 'Week'\n    },\n    trailers_filter_month: {\n        ru: 'Месяц',\n        uk: 'Місяць',\n        en: 'Month'\n    },\n    trailers_filter_year: {\n        ru: 'Год',\n        uk: 'Рік',\n        en: 'Year'\n    },\n    trailers_movies: {\n        ru: 'Фильмы',\n        uk: 'Фільми',\n        en: 'Movies'\n    },\n    trailers_series: {\n        ru: 'Сериалы',\n        uk: 'Серіали',\n        en: 'Series'\n    },\n    trailers_more: {\n        ru: 'Ещё',\n        uk: 'Ще',\n        en: 'More'\n    },\n    trailers_popular_movies: {\n        ru: 'Популярные фильмы',\n        uk: 'Популярні фільми',\n        en: 'Popular Movies'\n    },\n    trailers_last_movie: {\n        ru: 'Это последний фильм: [title]',\n        uk: 'Це останній фільм: [title]',\n        en: 'This is the last movie: [title]'\n    },\n    trailers_no_more_data: {\n        ru: 'Больше нет данных для загрузки',\n        uk: 'Більше немає даних для завантаження',\n        en: 'No more data to load'\n    }\n};\n\nexport function initTemplates() {\n    Lampa.Template.add('trailer', '<div class=\"card selector card--trailer layer--render layer--visible\"><div class=\"card__view\"><img src=\"./img/img_load.svg\" class=\"card__img\"><div class=\"card__promo\"><div class=\"card__promo-text\"><div class=\"card__title\"></div></div><div class=\"card__details\"></div></div></div><div class=\"card__play\"><img src=\"./img/icons/player/play.svg\"></div></div>');\n    Lampa.Template.add('trailer_style', '<style>.card.card--trailer,.card-more.more--trailers{width:25.7em}.card.card--trailer .card__view{padding-bottom:56%;margin-bottom:0}.card.card--trailer .card__details{margin-top:0.8em}.card.card--trailer .card__play{position:absolute;top:50%;transform:translateY(-50%);left:1.5em;background:#000000b8;width:2.2em;height:2.2em;border-radius:100%;text-align:center;padding-top:0.6em}.card.card--trailer .card__play img{width:0.9em;height:1em}.card.card--trailer .card__rating{position:absolute;bottom:0.5em;right:0.5em;background:#000000b8;padding:0.2em 0.5em;border-radius:3px;font-size:1.2em}.card.card--trailer .card__trailer-lang{position:absolute;top:0.5em;right:0.5em;background:#000000b8;padding:0.2em 0.5em;border-radius:3px;text-transform:uppercase;font-size:1.2em}.card.card--trailer .card__release-date{position:absolute;top:2em;right:0.5em;background:#000000b8;padding:0.2em 0.5em;border-radius:3px;font-size:1.2em}.card-more.more--trailers .card-more__box{padding-bottom:56%}.category-full--trailers{display:flex;flex-wrap:wrap;justify-content:space-between}.category-full--trailers .card{width:33.3%;margin-bottom:1.5em}.category-full--trailers .card .card__view{padding-bottom:56%;margin-bottom:0}.items-line__more{display:inline-block;margin-left:10px;cursor:pointer;padding:0.5em 1em}@media screen and (max-width:767px){.category-full--trailers .card{width:50%}}@media screen and (max-width:400px){.category-full--trailers .card{width:100%}}</style>');\n}\n","import { Trailer } from './trailer.js';\nimport { Line } from './line.js';\nimport { Component, Component$1 } from './component.js';\nimport { Api } from './api.js';\nimport { initTemplates, translations } from './templates.js';\n\nfunction startPlugin() {\n    if (window.plugin_trailers_ready) return;\n    window.plugin_trailers_ready = true;\n\n    // Додаємо переклади \n    Lampa.Lang.add(translations);\n\n    // Реєструємо компоненти\n    Lampa.Component.add('trailers_main', Component$1);\n    Lampa.Component.add('trailers_full', Component);\n\n    // Додаємо шаблони та стилі\n    initTemplates();\n\n    function add() {\n        var button = $('<li class=\"menu__item selector\"><div class=\"menu__ico\"><svg height=\"70\" viewBox=\"0 0 80 70\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M71.2555 2.08955C74.6975 3.2397 77.4083 6.62804 78.3283 10.9306C80 18.7291 80 35 80 35C80 35 80 51.2709 78.3283 59.0694C77.4083 63.372 74.6975 66.7603 71.2555 67.9104C65.0167 70 40 70 40 70C40 70 14.9833 70 8.74453 67.9104C5.3025 66.7603 2.59172 63.372 1.67172 59.0694C0 51.2709 0 35 0 35C0 35 0 18.7291 1.67172 10.9306C2.59172 6.62804 5.3025 3.2395 8.74453 2.08955C14.9833 0 40 0 40 0C40 0 65.0167 0 71.2555 2.08955ZM55.5909 35.0004L29.9773 49.5714V20.4286L55.5909 35.0004Z\" fill=\"currentColor\"/></svg></div><div class=\"menu__text\">' + Lampa.Lang.translate('title_trailers') + '</div></li>');\n        button.on('hover:enter', function () {\n            Lampa.Activity.push({\n                url: '',\n                title: Lampa.Lang.translate('title_trailers'),\n                component: 'trailers_main',\n                page: 1\n            });\n        });\n        $('.menu .menu__list').eq(0).append(button);\n        $('body').append(Lampa.Template.get('trailer_style', {}, true));\n        Lampa.Storage.listener.follow('change', function (event) {\n            if (event.name === 'language') {\n                Api.clear();\n            }\n        });\n    }\n\n    if (Lampa.TMDB && Lampa.TMDB.key()) {\n        add();\n    } else {\n        Lampa.Noty.show('TMDB API key is missing. Trailers plugin cannot be loaded.');\n    }\n}\n\n// Запускаємо плагін\nif (!window.appready) {\n    Lampa.Listener.follow('app', function (e) {\n        if (e.type === 'ready') {\n            startPlugin();\n        }\n    });\n} else {\n    startPlugin();\n}\n"],"names":["debounce","func","wait","timeout","context","args","arguments","clearTimeout","setTimeout","apply","getFormattedDate","daysAgo","today","Date","setDate","getDate","year","getFullYear","month","String","getMonth","padStart","day","formatDateToDDMMYYYY","dateStr","date","getRegion","lang","Lampa","Storage","get","getInterfaceLanguage","getPreferredLanguage","trailerCache","categoryCache","CACHE_TTL","clearExpiredCache","console","log","key","timestamp","now","set","setInterval","finalizeResults","json","status","results","type","error","append","items","map","item","id","title","name","poster_path","backdrop_path","vote_average","release_date","first_air_date","original_title","original_name","release_details","Lang","translate","Api","clear","videos","data","success","fail","TMDB","video","getLocalMoviesInTheaters","priorDate","dateString","api","Status","length","onComplite","forEach","i","release","main","getUpcomingMovies","getNewSeriesSeasons","getUpcomingSeries","getPopularTrailers","Trailer","params","build","card","Template","img","find","is_youtube","rating","toFixed","trailer_lang","create","slice","text","remove","cardImgBackground","card_data","field","window","innerWidth","image","_this","onload","addClass","onerror","src","loadTrailerInfo","trailers","filter","v","preferredLangs","includes","iso_639_1","toUpperCase","region","releaseInfo","r","iso_3166_1","release_dates","releaseDate","play","Noty","show","Manifest","app_digital","Utils","shortText","youtube","url","icon","template","Player","playlist","YouTube","e","message","_this2","on","is_mouse","Background","change","onFocus","target","view","Loading","start","stop","push","separator","subtitle","Select","onSelect","Controller","toggle","Activity","component","method","source","onBack","destroy","visible","visibled","render","$","Line","cards","element","cardElement","collectionSet","collectionFocus","onDown","onUp","Component","object","scroll","active","light","menu","Platform","is","add","hasItems","immediately","activity","loader","bind","down","up","back","onToggle","indexOf","wrap","translations","trailers_popular","ru","uk","en","trailers_in_theaters","trailers_upcoming_movies","trailers_popular_series","trailers_new_series_seasons","trailers_upcoming_series","trailers_no_trailers","trailers_no_ua_trailer","trailers_no_ru_trailer","trailers_view","title_trailers","trailers_filter","trailers_filter_today","trailers_filter_week","trailers_filter_month","trailers_filter_year","trailers_movies","trailers_series","trailers_more","trailers_popular_movies","trailers_last_movie","trailers_no_more_data","initTemplates","Component$1","startPlugin","plugin_trailers_ready","button","page","eq","listener","follow","event","appready","Listener"],"sourceRoot":""}